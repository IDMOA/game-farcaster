<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reaction Clicker - Farcaster Mini App</title>

  <!-- Farcaster Frame Meta Tags -->
  <meta property="fc:frame" content="vNext" />
  <meta property="fc:frame:image" content="https://game-farcaster.vercel.app/preview.png" />
  <meta property="fc:frame:button:1" content="Play Game üéØ" />
  <meta property="fc:frame:button:1:action" content="link" />
  <meta property="fc:frame:button:1:target" content="https://game-farcaster.vercel.app/" />

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Reaction Clicker Game" />
  <meta property="og:description" content="Click the targets as fast as you can! Test your reflexes in 30 seconds." />
  <meta property="og:image" content="https://game-farcaster.vercel.app/preview.png" />
  <meta property="og:url" content="https://game-farcaster.vercel.app/" />

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display:flex; justify-content:center; align-items:center; min-height:100vh; color:white; overflow-x:hidden; padding:10px; }
    .game-container { text-align:center; padding:20px; max-width:500px; width:100%; }
    h1 { font-size:2.5em; margin-bottom:10px; text-shadow:2px 2px 4px rgba(0,0,0,0.3); }
    .nav-tabs { display:flex; gap:10px; margin-bottom:20px; justify-content:center; }
    .tab-btn { background: rgba(255,255,255,0.2); color:white; border:2px solid transparent; padding:10px 20px; font-size:1em; border-radius:10px; cursor:pointer; transition: all 0.3s; backdrop-filter: blur(10px); }
    .tab-btn.active { background: rgba(255,255,255,0.4); border-color: rgba(255,255,255,0.5); }
    .tab-btn:hover { background: rgba(255,255,255,0.3); }
    .score-board { background: rgba(255,255,255,0.2); padding:20px; border-radius:15px; margin:20px 0; backdrop-filter:blur(10px); }
    .score { font-size:3em; font-weight:bold; color:#fff; }
    .timer { font-size:1.5em; margin-top:10px; color:#ffd700; }
    .game-area { position:relative; width:100%; height:400px; background: rgba(255,255,255,0.1); border-radius:15px; margin:20px 0; overflow:hidden; backdrop-filter:blur(10px); touch-action:none; }
    .target { position:absolute; width:70px; height:70px; background: linear-gradient(135deg, #ff6b6b, #ee5a6f); border-radius:50%; cursor:pointer; transition: transform 0.1s; box-shadow:0 5px 15px rgba(0,0,0,0.3); display:flex; align-items:center; justify-content:center; font-size:28px; user-select:none; -webkit-tap-highlight-color:transparent; }
    .target:hover { transform: scale(1.1); }
    .target:active { transform: scale(0.9); }
    button { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color:white; border:none; padding:15px 40px; font-size:1.2em; border-radius:50px; cursor:pointer; transition: all 0.3s; box-shadow:0 5px 15px rgba(0,0,0,0.3); font-weight:bold; -webkit-tap-highlight-color:transparent; }
    button:hover { transform: translateY(-2px); box-shadow:0 7px 20px rgba(0,0,0,0.4); }
    button:active { transform: translateY(0); }
    .game-over { display:none; background: rgba(255,255,255,0.2); padding:30px; border-radius:15px; backdrop-filter: blur(10px); }
    .game-over.show { display:block; }
    .final-score { font-size:2.5em; color:#ffd700; margin:15px 0; }
    .instructions { background: rgba(255,255,255,0.2); padding:15px; border-radius:10px; margin:20px 0; font-size:0.9em; backdrop-filter:blur(10px); }
    .share-btn { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); margin-top:15px; }
    .profile-section { background: rgba(255,255,255,0.2); padding:25px; border-radius:15px; backdrop-filter: blur(10px); margin:20px 0; }
    .profile-form { margin-bottom:20px; }
    .input-group { margin:15px 0; }
    .input-group input { width:100%; padding:12px; border:2px solid rgba(255,255,255,0.3); border-radius:10px; background: rgba(255,255,255,0.1); color:white; font-size:1em; backdrop-filter:blur(10px); }
    .input-group input::placeholder { color: rgba(255,255,255,0.6); }
    .player-stats { background: rgba(255,255,255,0.15); padding:20px; border-radius:12px; margin:15px 0; }
    .stat-row { display:flex; justify-content:space-between; margin:10px 0; font-size:1.1em; }
    .stat-label { opacity:0.8; }
    .stat-value { font-weight:bold; color:#ffd700; }
    .leaderboard { background: rgba(255,255,255,0.2); padding:20px; border-radius:15px; backdrop-filter:blur(10px); margin:20px 0; max-height:500px; overflow-y:auto; }
    .leaderboard-item { background: rgba(255,255,255,0.15); padding:15px; border-radius:10px; margin:10px 0; display:flex; justify-content:space-between; align-items:center; transition: transform 0.2s; }
    .leaderboard-item:hover { transform: translateX(5px); background: rgba(255,255,255,0.25); }
    .leaderboard-rank { font-size:1.5em; font-weight:bold; min-width:40px; }
    .leaderboard-rank.gold { color:#ffd700; }
    .leaderboard-rank.silver { color:#c0c0c0; }
    .leaderboard-rank.bronze { color:#cd7f32; }
    .leaderboard-player { flex:1; text-align:left; padding:0 15px; }
    .leaderboard-player-name { font-weight:bold; font-size:1.1em; }
    .leaderboard-score { font-size:1.3em; font-weight:bold; color:#ffd700; }
    .empty-state { padding:40px; opacity:0.6; font-size:1.1em; }
    @media (max-width:600px) { h1{font-size:2em;} .game-area{height:350px;} .target{width:65px;height:65px;font-size:24px;} .tab-btn{padding:8px 15px;font-size:0.9em;} }
  </style>
</head>
<body>
  <div class="game-container">
    <h1>üéØ Reaction Clicker</h1>

    <div class="nav-tabs">
      <button class="tab-btn active" onclick="showTab('game')">üéÆ Game</button>
      <button class="tab-btn" onclick="showTab('profile')">üë§ Profile</button>
      <button class="tab-btn" onclick="showTab('leaderboard')">üèÜ Leaderboard</button>
    </div>

    <!-- Game Tab -->
    <div id="gameTab">
      <div id="menu">
        <div class="instructions">
          Click the targets as fast as you can!<br>
          You have 30 seconds to get the highest score!
        </div>
        <button onclick="startGame()">Start Game</button>
      </div>

      <div id="gamePlay" style="display: none;">
        <div class="score-board">
          <div>Score</div>
          <div class="score" id="score">0</div>
          <div class="timer" id="timer">Time: 30s</div>
        </div>
        <div class="game-area" id="gameArea"></div>
      </div>

      <div id="gameOver" class="game-over">
        <h2>Game Over! üéâ</h2>
        <div class="final-score" id="finalScore">0</div>
        <p>Great reflexes!</p>
        <button onclick="restartGame()">Play Again</button>
        <button class="share-btn" onclick="shareScore()">Share on Farcaster üöÄ</button>
      </div>
    </div>

    <!-- Profile Tab -->
    <div id="profileTab" style="display: none;">
      <div class="profile-section">
        <h2>Your Profile</h2>
        <div id="profileForm" class="profile-form">
          <div class="input-group">
            <input type="text" id="playerName" placeholder="Enter your name" maxlength="20">
          </div>
          <button onclick="saveProfile()">Save Profile</button>
        </div>
        <div id="playerStats" style="display: none;">
          <div class="player-stats">
            <h3 id="displayName">Player</h3>
            <div class="stat-row"><span class="stat-label">Best Score:</span><span class="stat-value" id="bestScore">0</span></div>
            <div class="stat-row"><span class="stat-label">Games Played:</span><span class="stat-value" id="gamesPlayed">0</span></div>
            <div class="stat-row"><span class="stat-label">Total Clicks:</span><span class="stat-value" id="totalClicks">0</span></div>
            <div class="stat-row"><span class="stat-label">Average Score:</span><span class="stat-value" id="avgScore">0</span></div>
          </div>
          <button onclick="editProfile()">Edit Profile</button>
          <button onclick="resetStats()" style="background: linear-gradient(135deg, #ff6b6b, #ee5a6f); margin-top: 10px;">Reset Stats</button>
        </div>
      </div>
    </div>

    <!-- Leaderboard Tab -->
    <div id="leaderboardTab" style="display: none;">
      <h2>üèÜ Leaderboard</h2>
      <div class="leaderboard" id="leaderboardList">
        <div class="empty-state">No scores yet. Be the first to play!</div>
      </div>
    </div>
  </div>

  <script>
    // Entire game JS goes here (same as your original script)
    let score = 0, timeLeft = 30, timerInterval, targetInterval, playerData = null;

    window.addEventListener('DOMContentLoaded', () => { loadPlayerData(); loadLeaderboard(); });

    function loadPlayerData() {
      const saved = localStorage.getItem('reactionClickerPlayer');
      if (saved) { playerData = JSON.parse(saved); showPlayerStats(); }
    }

    function saveProfile() {
      const name = document.getElementById('playerName').value.trim();
      if (!name) { alert('Please enter your name!'); return; }
      playerData = { name, bestScore:0, gamesPlayed:0, totalClicks:0 };
      localStorage.setItem('reactionClickerPlayer', JSON.stringify(playerData));
      showPlayerStats();
    }

    function editProfile() {
      document.getElementById('profileForm').style.display='block';
      document.getElementById('playerStats').style.display='none';
      document.getElementById('playerName').value=playerData.name;
    }

    function showPlayerStats() {
      document.getElementById('profileForm').style.display='none';
      document.getElementById('playerStats').style.display='block';
      document.getElementById('displayName').textContent=playerData.name;
      document.getElementById('bestScore').textContent=playerData.bestScore;
      document.getElementById('gamesPlayed').textContent=playerData.gamesPlayed;
      document.getElementById('totalClicks').textContent=playerData.totalClicks;
      const avg = playerData.gamesPlayed>0?Math.round(playerData.totalClicks/playerData.gamesPlayed):0;
      document.getElementById('avgScore').textContent=avg;
    }

    function resetStats() {
      if(confirm('Are you sure you want to reset all your stats?')){
        playerData.bestScore=0; playerData.gamesPlayed=0; playerData.totalClicks=0;
        localStorage.setItem('reactionClickerPlayer', JSON.stringify(playerData));
        showPlayerStats();
      }
    }

    function updatePlayerStats(gameScore){
      if(!playerData){
        playerData={name:'Anonymous', bestScore:gameScore, gamesPlayed:1, totalClicks:gameScore};
      } else {
        playerData.gamesPlayed++; playerData.totalClicks+=gameScore;
        if(gameScore>playerData.bestScore){ playerData.bestScore=gameScore; }
      }
      localStorage.setItem('reactionClickerPlayer', JSON.stringify(playerData));
      updateLeaderboard(playerData.name, gameScore);
    }

    function updateLeaderboard(name,newScore){
      let leaderboard=JSON.parse(localStorage.getItem('reactionClickerLeaderboard')||'[]');
      const existingIndex=leaderboard.findIndex(p=>p.name===name);
      if(existingIndex>=0){ if(newScore>leaderboard[existingIndex].score){ leaderboard[existingIndex].score=newScore; } }
      else{ leaderboard.push({name,score:newScore}); }
      leaderboard.sort((a,b)=>b.score-a.score); leaderboard=leaderboard.slice(0,10);
      localStorage.setItem('reactionClickerLeaderboard', JSON.stringify(leaderboard));
      loadLeaderboard();
    }

    function loadLeaderboard(){
      const leaderboard=JSON.parse(localStorage.getItem('reactionClickerLeaderboard')||'[]');
      const container=document.getElementById('leaderboardList');
      if(leaderboard.length===0){ container.innerHTML='<div class="empty-state">No scores yet. Be the first to play!</div>'; return; }
      container.innerHTML=leaderboard.map((player,index)=>{
        let rankClass='', medal='';
        if(index===0){ rankClass='gold'; medal='ü•á'; } else if(index===1){ rankClass='silver'; medal='ü•à'; } else if(index===2){ rankClass='bronze'; medal='ü•â'; }
        return `<div class="leaderboard-item"><div class="leaderboard-rank ${rankClass}">${medal||index+1}</div><div class="leaderboard-player"><div class="leaderboard-player-name">${player.name}</div></div><div class="leaderboard-score">${player.score}</div></div>`;
      }).join('');
    }

    function
